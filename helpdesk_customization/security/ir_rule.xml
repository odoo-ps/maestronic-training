<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Record Rules on Helpdesk Ticket -->
    <record id="rule_partner_responsible" model="ir.rule">
        <field name="name">Helpdesk: Only see tickets for responsible users</field>
        <field ref="helpdesk.model_helpdesk_ticket" name="model_id"/>
        <field name="domain_force">['|', ('partner_id', '=', user.partner_id.id), ('partner_id', 'in', user.partner_id.parent_id.child_ids.ids)]</field>
        <field name="groups" eval="[(6, 0, [ref('helpdesk.group_helpdesk_user')])]"/>
    </record>
    <!-- Record Rules on Repair Order -->
    <record id="rule_repair_order_specific" model="ir.rule">
        <field name="name">Repair: See from your own company</field>
        <field name="model_id" ref="repair.model_repair_order"/>
        <field name="domain_force">['|', ('partner_id', '=', user.partner_id.id), ('partner_id', 'in', user.partner_id.parent_id.child_ids.ids)]</field>
        <field name="groups" eval="[(6, 0, [ref('group_repair_user')])]"/>
    </record>
    <!-- Helpdesk Team see only if you are assigned to that team -->
    <data noupdate="1">
        <record id="helpdesk.helpdesk_user_rule" model="ir.rule">
            <field name="domain_force">['|', ('visibility_member_ids','in', user.id), ('visibility_member_ids','=', False)]</field>
        </record>
    </data>
</odoo>
